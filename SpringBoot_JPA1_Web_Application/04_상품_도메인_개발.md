## 0. 목차
- 상품 엔티티 개발(비지니스 로직 추가)
- 상품 리포지토리 개발
- 상품 서비스 개발

## 1. 상품 엔티티 개발(비지니스 로직 추가)
### 1-1. 구현 기능
- 상품 등록
- 상품 목록 조회
- 상품 수정
- 순서
  - 상품 엔티티 개발(비즈니스 로직 추가)
  - 상품 리포지토리 개발
  - 상품 서비스 개발
  - 상품 기능 테스트

### 1-2. 상품 엔티티 코드(비지니스 로직 추가)
- domain/item/item.class
  ```java
  @Entity
  @Inheritance(strategy = InheritanceType.SINGLE_TABLE)
  // 상속관계 맵핑이기 때문에 상속관계 전략을 지정해야한다
  // 부모클래스에 잡아줘야한다. 우리는 싱글테이블 전략을 쓴다
  @DiscriminatorColumn(name = "dtype")
  // 구분해준다 book이면 이걸 할꺼야! -> book에 @DiscrimnatorValue
  @Getter @Setter
  public abstract class Item { //abstract 추상클래스로 생성 구현체를 가지고 할것이기 때문

      @Id @GeneratedValue
      @Column(name = "item_id")
      private Long id;
      ...
      private int stockQuantity;
      ...

      //==비지니스 로직==//
      public void addStock(int quantity) {
          this.stockQuantity += quantity;
      }

      public void removeStock(int quantity) {
          int restStock = this.stockQuantity - quantity;
          if (restStock < 0) {
              throw new NotEnoughStockException("need more stock"); // 내가만든 예외 exception
          }
          this.stockQuantity = restStock;
      }
  }
  ```
  - service에서 set을 사용해서 수정하는 것보다 해당 필드를 가지고있는 엔티티에서 처리하는것이 응집력이 더 좋다.

- exception/NotEnoughStockException.class
  ```java
  package jpabook.jpashop.exception;

  public class NotEnoughStockException extends RuntimeException{
      // Alt + Insert -> override
      public NotEnoughStockException() {
          super();
      }

      public NotEnoughStockException(String message) {
          super(message);
      }

      public NotEnoughStockException(String message, Throwable cause) {
          super(message, cause);
      }

      public NotEnoughStockException(Throwable cause) {
          super(cause);
      }
  }
  ```